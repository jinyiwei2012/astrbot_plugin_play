# Minecraft服务器监控插件

这是一个基于AstrBot框架开发的Minecraft服务器监控插件，可以定时检测服务器状态变化并发送通知。

## 功能特性

- 🔄 **智能监控**: 定时检测服务器状态，只在有变化时发送通知
- 📊 **详细信息**: 显示在线玩家数量、版本信息、玩家列表等
- ⚡ **实时查询**: 支持即时查询服务器当前状态
- ⚙️ **灵活配置**: 支持通过WebUI配置目标群、服务器地址、检查间隔等
- 🚀 **自动启动**: 可配置插件加载时自动启动监控

## 配置选项

通过AstrBot的WebUI可以配置以下参数：

- **目标群号** (`target_group`): QQ群号，默认为 "1235456879"
- **服务器IP** (`server_ip`): Minecraft服务器IP地址，默认为 "play."  
- **服务器端口** (`server_port`): 服务器端口，默认为 2
- **检查间隔** (`check_interval`): 监控检查间隔（秒），默认为 10 秒
- **自动监控** (`enable_auto_monitor`): 是否在插件加载时自动启动监控，默认为 false

## 可用指令

- `/查询` - 立即查询服务器当前状态
- `/start_server_monitor` - 启动定时监控任务
- `/stop_server_monitor` - 停止监控任务
- `/reset_monitor` - 重置监控状态缓存

## 监控逻辑

插件会智能检测以下变化：
- 🟢 服务器上线/离线状态变化
- 📈 玩家加入服务器（显示具体玩家名称）
- 📉 玩家离开服务器（显示具体玩家名称）
- 首次启动时会发送当前服务器状态

## 技术特性

- 基于异步IO，性能优异
- 使用MineBBS API获取服务器状态
- 直接调用AIOCQHTTP接口确保消息发送成功
- 状态缓存机制避免重复通知
- 完整的错误处理和日志记录

## 安装使用

1. 将插件文件放入 `data/plugins/astrbot_plugin_play/` 目录
2. 确保包含以下文件：
   - `main.py` - 主程序文件
   - `metadata.yaml` - 插件元数据
   - `_conf_schema.json` - 配置模式
   - `README.md` - 说明文档
3. 重启AstrBot或在WebUI中重新加载插件
4. 在WebUI的插件配置页面设置相关参数
5. 使用 `/start_server_monitor` 启动监控或启用自动监控

## 注意事项

- 插件需要网络连接以访问MineBBS API
- 确保配置的QQ群号正确且机器人已加入该群
- 建议检查间隔不要设置过短，避免频繁API请求

## 更新日志


### v1.0
- 基础监控功能
- 智能变化检测
- 定时任务系统

